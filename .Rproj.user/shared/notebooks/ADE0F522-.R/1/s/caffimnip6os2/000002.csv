"0","text_to_insert <- html_4 # this is the bit of text we want to add from before"
"0",""
"0","insert_after <- which(dat %in% '\t<div id=""main"" role=""main"" class=""container"">') # line in the index.html where the header ends: insert pubs table after this"
"0","insert_before <- grep('<div class=""wrapper-footer"">', dat3) # this is the line where the index.html file footer starts: insert before this"
"0","# function to do the insertion"
"0","insert_line_at <- function(dat, to_insert, insert_after, insert_before){"
"0","  pre <- dat[1:insert_after]"
"0","  post <- dat[(insert_before):length(dat)]"
"0","  return(c(pre, to_insert, post))"
"0","}"
"0","# run the insertion"
"0","dat_inserted <- insert_line_at(dat3, text_to_insert, insert_after=insert_after, insert_before = insert_before)"
"0",""
"0","dat_inserted2 = gsub(""\u00A0"", "" "", dat_inserted) # this removes the unbreakable space that appeared for some unkown reason..."
"0",""
"0","writeLines(dat_inserted2, ""publications/publications.html"") # write to Publication list pages"
"0",""
"0","######"
"0","# remember to commit & push to github and it's live!"
"0",""
