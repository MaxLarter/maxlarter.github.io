"0","# my google scholar user id from my profile url"
"0","# https://scholar.google.com/citations?user=-WJKy_EAAAAJ&hl=en"
"0","MaxLarter <- ""-WJKy_EAAAAJ&hl"""
"0",""
"0","# pull from google"
"0","html_1 <- get_publications(MaxLarter)"
"0",""
"0","# convert to htlm table - the ugly way ;)"
"0","html_2 <- html_1 %>%"
"0","  as_tibble %>% arrange(desc(year)) %>%"
"0","  mutate("
"0","#    author=str_replace_all(author, "" (\\S) "", ""\\1 ""),"
"0","    author=str_replace_all(author, ""([A-Z]) ([A-Z]) "", ""\\1\\2 ""),"
"0","    author=str_replace_all(author, "", \\.\\.\\."", "" et al.""),"
"0","    author=str_replace_all(author, ""M Larter"", ""<b>M Larter</b>"") # make my name fat"
"0","  ) %>% split(.$year) %>%"
"0","    map(function(x){"
"0","      x <- x %>%"
"0","        glue_data('<tr><td width=""100%"">{author} ({year}) <a href=""https://scholar.google.com/scholar?oi=bibs&cluster={cid}&btnI=1&hl=en"">{title}</a>, {journal}, {number}</td></tr>') %>%"
"0","        str_replace_all(""(, )+</p>"", ""</p>"") %>%"
"0","        char2html()"
"0","      x <- c('<table class=""publication-table"" border=""10px solid blue"" cellspacing=""0"" cellpadding=""6"" rules="""", frame=""""><tbody>', x, '</tbody></table>')"
"0","      return(x);"
"0","    }) %>% rev"
"0",""
"0","html_3 <- map2(names(html_2) %>% paste0(""<h3>"", ., ""</h3>""), html_2, c) %>% unlist"
"0",""
"0","html_4 <- c("
"0","  paste0('<p style=""text-align: right; margin-top: -40px;""><small>Last updated <i>',"
"0","         format(Sys.Date(), format=""%B %d, %Y""),"
"0","         '&ndash; Pulled automatically from my <a href=""https://scholar.google.com/citations?user=-WJKy_EAAAAJ&hl=en"">Google Scholar profile</a>. See <a href=""https://thackl.github.io/automatically-update-publications-with-R-scholar"">this post</a> for how it works.</small></p>'), html_3)"
"0",""
"0","# write the html list to a file"
"0","writeLines(html_4, ""output/publications.html"")"
"0",""
